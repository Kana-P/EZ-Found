{% extends "base.html" %}
{% block content %}
{% load static %}
    <style>
        .filter-container {
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .category-container {
            height: 60px;
            background-color: white;
            margin: 20px;
            border-radius: 0.5em;
            display: flex;
            flex-direction: row;
        }

        .category-title {
            position: relative;
            background-color: #C7C7C7;
            padding: 10px;
            border-radius: 0.5em 0em 0em 0.5em;
        }

        .category-title div {
            position: relative;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: white;
        }

        .category-items {
            position: relative;
            width: 100%;
            border-radius: 0em 0.5em 0.5em 0em;
            display: flex;
            flex-direction: row;
            overflow-x: scroll;
        }

        .category-items::-webkit-scrollbar {
            height: 0px;
        }

        .category-item {
            position: relative;
            margin: 10px;
            background-color: white;
            border: gray 2px solid; 
            border-radius: 0.5em;
            z-index: 2;
            cursor: pointer;
        }

        .category-item div {
            position: relative;
            z-index: 3;
            top: 50%;
            transform: translateY(-50%);
            margin-left: 10px;
            margin-right: 10px;
        }

        .category-checkbox {
            position: relative;
            visibility: hidden;
            position:absolute;
        }

        .category-span-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 1;
            border-radius: 0.3em;
            transition: all 0.2s;
        }

        .category-checkbox:checked ~ .category-span-bg {
            background-color: rgba(84, 193, 210, 0.479);
        }

        .location-status-container {
            position: relative;
            display: flex;
            flex-direction: row;
            /* flex-wrap: wrap; */
        }

        .location-container {
            position: relative;
            width: 50%;
            height: 60px;
            background-color: white;
            margin: 20px;
            border-radius: 0.5em;
            display: flex;
            flex-direction: row;
        }

        .location-items {
            position: relative;
            padding: 10px;
            width: 100%;
        }

        .location-items select {
            position: relative;
            top: 50%;
            transform: translateY(-50%);
        }

        .status-container {
            position: relative;
            width: 50%;
            height: 60px;
            background-color: white;
            margin: 20px;
            border-radius: 0.5em;
            display: flex;
            flex-direction: row;
        }

        .status-items {
            position: relative;
            width: 100%;
            border-radius: 0em 0.5em 0.5em 0em;
            display: flex;
            flex-direction: row;
            overflow-x: scroll;
        }

        .status-items::-webkit-scrollbar {
            height: 0px;
        }

        .status-item {
            position: relative;
            margin: 10px;
            background-color: white;
            border: gray 2px solid; 
            border-radius: 0.5em;
            z-index: 2;
            cursor: pointer;
        }

        .status-item div {
            position: relative;
            z-index: 3;
            top: 50%;
            transform: translateY(-50%);
            margin-left: 10px;
            margin-right: 10px;
        }

        .status-checkbox {
            position: relative;
            visibility: hidden;
            position:absolute;
        }

        .status-span-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 1;
            border-radius: 0.3em;
            transition: all 0.2s;
        }

        .status-checkbox:checked ~ .status-span-bg {
            background-color: rgba(84, 193, 210, 0.479);
        }
    </style>
    <form action="">
        <div class="filter-container">
            <div data-aos="zoom-in" class="category-container">
                <div class="category-title">
                    <div>
                        <span>Category</span>
                    </div>
                </div>
                <div class="category-items">
                    {% for C in Category %}
                        <label data-aos="zoom-in" data-aos-delay="{{C.id}}00" for="filter-category-{{C.id}}" class="category-item">
                            <input type="checkbox" class="category-checkbox" name="category-checkbox-{{C.id}}" id="filter-category-{{C.id}}" value="option1">
                            <span class="category-span-bg"></span>
                            <div>
                                <p>{{C.value}}</p>
                            </div>
                        </label>
                    {% endfor %}
                </div>
            </div>
            <div class="location-status-container">
                <div data-aos="zoom-in" data-aos-delay="100" class="location-container">
                    <div class="category-title">
                        <div>
                            <span>Location</span>
                        </div>
                    </div>
                    <div class="location-items">
                        <select class="form-control" id="filter-location">
                            <option selected>--> Location <--</option>
                            {% for L in Locations %}
                                <option>{{L.value}}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div data-aos="zoom-in" data-aos-delay="200" class="status-container">
                    <div class="category-title">
                        <div>
                            <span>Status</span>
                        </div>
                    </div>
                    <div class="category-items">
                        {% for S in Status %}
                            <label data-aos="zoom-in" data-aos-delay="{{S.id}}00" for="filter-status-{{S.id}}" class="status-item">
                                <input type="checkbox" class="status-checkbox" name="status-checkbox-{{S.id}}" id="filter-status-{{S.id}}" value="option1">
                                <span class="status-span-bg"></span>
                                <div>
                                    <p>{{S.value}}</p>
                                </div>
                            </label>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </form>
    <style>
        .new-post-container {
            position: relative;
            height: 200px;
            margin: 20px;
        }

        .new-post-label {
            position: relative;
            background-color: #D2F1F4;
            width: 100%;
            height: 100%;
            border-radius: 0.5em;
            cursor: pointer;
        }

        .new-post {
            position: relative;
            display: flex;
            flex-direction: column;
            height: 75%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .new-post-plus-icon {
            position: relative;
            height: 50%;
        }
        .new-post-plus-icon img {
            position: relative;
            height: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .new-post-text {
            position: relative;
            width: 100%;
            height: 50%;
            font-weight: bold;
            color: #B5B5B5;
            text-align: center;
            font-size: 48px;
        }

        .new-post-text span {
            position: relative;
        }
    </style>

    <input type="checkbox" id="new-post-checkbox" style="position: absolute; visibility: hidden;">
    <div data-aos="zoom-in" data-aos-delay="200" class="new-post-container">
        <label for="new-post-checkbox" class="new-post-label">
            <div class="new-post">
                <div class="new-post-plus-icon">
                    <img src="{% static "images/add.png" %}">
                </div>
                <div class="new-post-text">
                    <span>Make a new Post</span>
                </div>
            </div>
        </label>
    </div>
    <style>
        .new-post-form {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 90%;
            max-width: 700px;
            /* height: 90%; */
            min-height: 800px;
            transform: translate(-50%, -50%);
            z-index: 999;
            display: none;
        }

        #new-post-checkbox:checked ~ .new-post-form{
            display: unset;
        }

        .close-new-post-label {
            position: fixed;
            top: 0%;
            left: 0%;
            background-color: rgba(128, 128, 128, 0.5);
            width: 100%;
            height: 100%;
            display: none;
            cursor: pointer;
            z-index: 999;
        }

        #new-post-checkbox:checked ~ .close-new-post-label{
            display: unset;
        }

        .drag-and-drop-container {
            position: relative;
            width: 100%;
            height: 350px;
            padding: 10px;
            background: linear-gradient(0deg, rgba(64,242,130,1) 0%, rgba(84,193,210,1) 100%);;
            border-radius: 0.5em 0.5em 0em 0em;
        }

        .new-post-form-detail {
            position: relative;
            width: 100%;
            height: 60%;
            background-color: white;
            padding: 20px;
            border-radius: 0em 0em 0.5em 0.5em;
        }

        .from-category {
            position: relative;
            /* height: 30px; */
            margin: 10px;
            display: flex;
            flex-direction: row;
        }
        .form-category-title {
            position: relative;
            padding: 0px 10px 0px 0px;
            border-radius: 0.5em 0em 0em 0.5em;
        }

        .form-category-title div {
            position: relative;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: #B5B5B5;
        }
        .form-category-items {
            position: relative;
            width: 100%;
            border-radius: 0.5em;
            display: flex;
            flex-direction: row;
            overflow-x: scroll;
            background-color: #E1E1E1;
        }

        .form-category-items::-webkit-scrollbar {
            height: 0px;
        }

        .form-category-item {
            position: relative;
            margin: 10px;
            background-color: white;
            border: gray 2px solid; 
            border-radius: 0.5em;
            z-index: 2;
            cursor: pointer;
        }

        .form-category-item div {
            position: relative;
            z-index: 3;
            top: 50%;
            transform: translateY(-50%);
            margin-left: 10px;
            margin-right: 10px;
        }

        .form-category-checkbox {
            position: relative;
            visibility: hidden;
            position:absolute;
        }

        .form-category-span-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 1;
            border-radius: 0.3em;
            transition: all 0.2s;
        }
        .form-category-checkbox:checked ~ .form-category-span-bg {
            background-color: rgba(84, 193, 210, 0.479);
        }

        .form-location {
            position: relative;
            width: 100%;
            /* height: 30px; */
            margin: 10px;
            display: flex;
            flex-direction: row;
        }
        .form-location-items {
            position: relative;
            width: 100%;
            padding: 5px;
            background-color: #E1E1E1;
            border-radius: 0.5em;
        }

        .form-status {
            position: relative;
            width: 100%;
            /* height: 30px; */
            margin: 10px;
            display: flex;
            flex-direction: row;
        }

        .form-des {
            position: relative;
            /* width: 100%; */
            margin: 10px;
            display: flex;
            flex-direction: column;
        }
        .form-des-title {
            position: relative;
            padding: 10px 0px;
            font-weight: bold;
            color: #B5B5B5;
        }
        .form-des-detail textarea{
            resize: vertical;
            min-height: 200px;
            max-height: 200px;
        }
        .new-post-form-submit-btn {
            position: relative;
            bottom: 0%;
            right: 0%;
            margin: 20px 0px 0px 0px;
        }
        .new-post-form-submit-btn div {
            position: relative;
            display: flex;
            justify-content: flex-end;
        }

        #myDropzone {
            padding: 20px;
        }

        #myDropzone img {
            position: relative;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            height: 100%;
        }

        #myDropzone input[type="file"] {
            position: absolute;
            bottom: 0%;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(225, 225, 225, 0.4);
            padding: 10px;
            margin: 10px;
            border-radius: 0.5em;
        }
    </style>
    <label for="new-post-checkbox" class="close-new-post-label"></label>
    <form action="{% url 'upload' %}" method="POST" class="new-post-form" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="drag-and-drop-container">
            <div style="position: relative; border: 3px dashed white; height: 100%; border-radius: 0.5em;" id="myDropzone">
                <img src='#' id='base64Img' style='display: none;'>
                <input type='file' name='dropzone' id='dropzone' onchange='readURL(this)' required/>
            </div>
            <script>
                function readURL(input) {
                    if (input.files && input.files[0]) {
                        var reader = new FileReader();
                        reader.onload = function (e) {
                            if (e.target.result.split("/")[0] == "data:image") {
                                document.getElementById('base64Img').src = e.target.result;
                                document.getElementById('base64Img').style.display = 'unset';
                            } else {
                                alert('Image only')
                                document.getElementById('dropzone').remove();
                                document.getElementById('myDropzone').innerHTML = 
                                "<img src='#' id='base64Img' style='display: none;'><input type='file' name='dropzone' id='dropzone' onchange='readURL(this)' required/>";
                            }
                        };
                        reader.readAsDataURL(input.files[0]);
                    }
                }
            </script>
        </div>
        <div class="new-post-form-detail">
            <div class="from-category">
                <div class="form-category-title">
                    <div>
                        <span>Category</span>
                    </div>
                </div>
                <div class="form-category-items">
                    {% for C in Category %}
                        <label data-aos="zoom-in" data-aos-delay="{{C.id}}00" for="new-post-form-category-{{C.id}}" class="form-category-item">
                            <input type="checkbox" class="form-category-checkbox" name="form-category-checkbox-{{C.id}}" id="new-post-form-category-{{C.id}}" value="{{C.value}}">
                            <span class="form-category-span-bg"></span>
                            <div>
                                <p>{{C.value}}</p>
                            </div>
                        </label>
                    {% endfor %}
                </div>
            </div>
            <div class="location-status-container">
                <div class="form-location">
                    <div class="form-category-title">
                        <div>
                            <span>Location</span>
                        </div>
                    </div>
                    <div class="form-location-items">
                        <select class="form-control" name="new-post-form-location">
                            <option selected>--> Location <--</option>
                            {% for L in Locations %}
                                <option value="{{L.value}}">{{L.value}}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="form-status">
                    <div class="form-category-title">
                        <div>
                            <span>Status</span>
                        </div>
                    </div>
                    <div class="form-location-items">
                        <select class="form-control" name="new-post-form-status">
                            <option selected>--> Status <--</option>
                            <option value="Lost">Lost</option>
                            <option value="Found">Found</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="form-des">
                <div class="form-des-title">
                    <div>
                        <span>Description</span>
                    </div>
                </div>
                <div class="form-des-detail">
                    <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
                </div>
            </div>
            <div class="new-post-form-submit-btn">
                <div>
                    <button type="submit" class="btn btn-primary" style="border-radius: 100em; width: 100px;">Post</button>
                </div>
            </div>
        </div>
    </form>

    <style>
        .post-container {
            position: relative;
            /* height: 800px; */
            background-color: thistle;
            margin: 20px;
            display: flex;
            flex-direction: column;
            border-radius: 0.5em;
            overflow: hidden;
        }

        .post-bar-container {
            position: relative;
            display: flex;
            flex-direction: row;
            height: 65px;
            padding: 5px;
            background-color: white;
        }

        .post-profile-container {
            position: relative;
            display: flex;
            flex-direction: row;
            padding: 5px;
            border-radius: 0.5em;
            transition: all 0.2s;
            margin-right: 5px;
        }

        .post-profile-container:hover {
            background-color: rgba(128, 128, 128, 0.4);
        }

        .post-profile-img {
            position: relative;
            /* height: 100%;
            max-height: 45px; */
            width: 100%;
            max-width: 45px;
        }

        .post-profile-name {
            position: relative;
            margin-left: 5px;
        }

        .post-profile-name p {
            position: relative; 
            top: 50%; 
            transform: translateY(-50%);
            color: #707070;
        }

        .post-date-container {
            position: relative;
            display: flex;
            flex-direction: row;
        }

        .post-date-img {
            position: relative;
            padding: 10px;
        }

        .post-date-img img{
            position: relative;
            top: 50%;
            transform: translateY(-50%);
        }

        .post-date-text p {
            position: relative;
            top: 50%;
            transform: translateY(-50%);
            color: #B5B5B5;
        }

        .post-img-container {
            position: relative;
            width: 100%;
        }

        .post-img-container img {
            position: relative;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 600px;
        }

        .post-detail-container {
            position: relative;
            width: 100%;
            display: flex;
            flex-direction: row;
            justify-content: space-between;            
            background-color: white;
            padding: 10px;
        }

        .post-detail {
            position: relative;   
            display: flex;
            flex-direction: row;
            align-items: center;
        }

        .post-detail-category-items {
            position: relative;
            background-color: white;
            padding: 0px 5px 0px 5px;
            margin: 5px;
            border-radius: 0.5em;
        }

        .post-detail-category-items p {
            position: relative;
            top: 50%;
            transform: translateY(-50%);
        }

        .post-description {
            position: relative;
            width: 100%;
            background-color: white;
            padding: 10px;
        }

        .post-comment-container {
            position: relative;
            display: flex;
            flex-direction: row;
            width: 100%;
            border-top: #B5B5B5 2px solid;
            padding: 10px;
            background-color: white;
        }
    </style>
    {% for C in Category %}
    <div data-aos="zoom-in" class="post-container">
        <div class="post-bar-container">
            <a href="#" class="post-profile-container" style="text-decoration: none;">
                <div style="position: relative;">
                    <div class="profile-img" style="background-image: url({% static "images/bg.jpeg" %});"></div>
                    <img class="post-profile-img" style="border-radius: 100%;"  src="{% static "images/icon.webp" %}">
                </div>
                <div class="post-profile-name">
                    <p>100%Not DummyAcc</p>
                </div>
            </a>
            <div class="post-date-container">
                <div class="post-date-img">
                    <img style="border-radius: 100%;"  src="{% static "images/clock.png" %}">
                </div>
                <div class="post-date-text">
                    <p> 10 Mar 2020 at 11.20 AM</p>
                </div>
            </div>
        </div>
        <div data-aos="zoom-in" data-aos-delay="250" class="post-img-container">
            <img src="{% static "images/bg.jpeg" %}">
        </div>
        <div class="post-detail-container">
            <div class="post-detail">
                <div class="form-category-items" style="max-width: 200px; height: 50px;">
                    {% for C in Category %}
                        <div class="post-detail-category-items">
                            <p >{{C.value}}</p>
                        </div>
                    {% endfor %}
                </div>
                <div class="post-date-container">
                    <div class="post-date-img">
                        <img style="border-radius: 100%;"  src="{% static "images/location.png" %}">
                    </div>
                    <div class="post-date-text">
                        <p>Faculty of Information Technology</p>
                    </div>
                </div>
            </div>
            <div>
                <button type="submit" class="btn btn-primary" style=
                "
                    border-radius: 100em;
                    width: 100px; 
                    position: relative; 
                    top: 50%;
                    transform: translateY(-50%);
                    font-weight: bold;
                    background-color: red;
                    border: unset;
                " 
                disabled>Lost</button>
            </div>
        </div>
        <div class="post-description">
            <p>
                ช่วยด้วยค่ะ พอดีว่าเราพาน้องไปคณะแล้วน้องวิ่งหนีไปอ่ะค่ะ ถ้าเจอน้องช่วยติดต่อกลับได้มั้ยคะ?
                ช่วยด้วยค่ะ พอดีว่าเราพาน้องไปคณะแล้วน้องวิ่งหนีไปอ่ะค่ะ ถ้าเจอน้องช่วยติดต่อกลับได้มั้ยคะ?
                ช่วยด้วยค่ะ พอดีว่าเราพาน้องไปคณะแล้วน้องวิ่งหนีไปอ่ะค่ะ ถ้าเจอน้องช่วยติดต่อกลับได้มั้ยคะ?
                ช่วยด้วยค่ะ พอดีว่าเราพาน้องไปคณะแล้วน้องวิ่งหนีไปอ่ะค่ะ ถ้าเจอน้องช่วยติดต่อกลับได้มั้ยคะ?
                ช่วยด้วยค่ะ พอดีว่าเราพาน้องไปคณะแล้วน้องวิ่งหนีไปอ่ะค่ะ ถ้าเจอน้องช่วยติดต่อกลับได้มั้ยคะ?
            </p>
        </div>
        <style>
            .post-comment-detail {
                position: relative;
                width: 100%;
                max-height: 500px;
                background-color: white;
                border-top: #B5B5B5 2px solid;
                display: none;
                padding: 10px;
                overflow-y: scroll;
            }

            .show-comment:checked ~ .post-comment-detail {
                display: flex;
                flex-direction: column;
            }

            .post-comment {
                position: relative;
                width: 100%;
                display: flex;
                flex-direction: column;
            }

            .post-comment-description {
                position: relative;
                background-color: #DFDFDF;
                margin: 0px 0px 10px 50px;
                padding: 10px;
                border-radius: 0.5em;
                width: fit-content;
            }
        </style>
        <input type="checkbox" id="show-comment-{{C.id}}" class="show-comment" style="position: absolute; visibility: hidden;">
        <div class="post-comment-detail">
            {% for L in Locations %}
            <div class="post-comment">
                <a href="#" class="post-profile-container" style="text-decoration: none; width: fit-content;">
                    <div style="position: relative;">
                        <div class="profile-img" style="background-image: url({% static "images/asw.png" %});"></div>
                        <img class="post-profile-img" style="border-radius: 100%;"  src="{% static "images/icon.webp" %}">
                    </div>
                    <div class="post-profile-name">
                        <p>ANSWER ME</p>
                    </div>
                </a>
                <div class="post-comment-description">
                    <p>
                        ใช่ค่ะ ขอบคุณมากๆค่ะ UwU
                    </p>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="post-comment-container">
            <form action="#" method="POST" style="margin: 0; width: 100%;">
                {% csrf_token %}
                <div class="post-commit">
                    <input type="text" class="form-control" style="border-radius: 100em;" name="post-comment" placeholder="Enter comment">
                </div>
            </form>
            <div>
                <label style="border-radius: 100em; margin-left: 10px; margin-bottom: 0;" class="btn btn-primary" for="show-comment-{{C.id}}">Show comment</label>
            </div>
        </div>
    </div>
    {% endfor %}
{% endblock %}